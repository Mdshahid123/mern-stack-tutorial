<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 3 - CSS Box Model</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9fafb;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    h1, h2, h3 { color: #2b6cb0; }
    .dark { background: #1e293b; color: #f1f5f9; }
    .dark h1, .dark h2, .dark h3 { color: #60a5fa; }

    .code-block { margin: 10px 0 5px; border-radius: 6px; overflow: hidden; }
    pre { margin: 0; border-radius: 6px; }
    code[contenteditable="true"] { outline: none; display: block; white-space: pre; }
    .preview-box {
      border: 2px solid #2b6cb0;
      padding: 20px;
      margin: 20px 0;
      border-radius: 6px;
      background: #fff;
      transition: background 0.3s, color 0.3s, border 0.3s;
    }
    .dark .preview-box { background: #334155; border-color: #60a5fa; }

    .demo {
      width: 150px;
      height: 100px;
      background: lightblue;
      margin: 10px;
      padding: 10px;
      border: 2px solid red;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }
    .box-flex { display: flex; gap: 20px; flex-wrap: wrap; }

    .btn {
      margin-top: 8px;
      padding: 6px 12px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #2b6cb0;
      color: #fff;
      transition: background 0.3s;
    }
    .btn:hover { background: #1e40af; }
    .dark .btn { background: #60a5fa; color: #1e293b; }
    .dark .btn:hover { background: #3b82f6; }
    #themeToggle { float: right; margin-bottom: 15px; }
  </style>
</head>
<body>

  <button id="themeToggle" class="btn">üåô Toggle Dark Mode</button>
  <h1>Chapter ‚Äì 3 (CSS Box Model)</h1>
  <p>The CSS box model looks at all the HTML elements as boxes. Every element is treated as a rectangular box consisting of content, padding, border, and margin.</p>

  <h2>Setting Width & Height</h2>
  <p>You can define an element‚Äôs width and height using CSS. Remember that the <b>total size</b> of an element also includes padding, border, and margin.</p>

  <div class="code-block">
    <pre><code class="language-css live-editor" contenteditable="true" data-target="demo1" data-default="height:70px; width:70px;">#box {
  height: 70px;
  width: 70px;
}</code></pre>
  </div>
  <div class="preview-box">
    <div class="demo" id="demo1">Box</div>
    <button class="btn reset-btn" data-target="demo1">Reset</button>
  </div>

  <h2>Setting Margin & Padding</h2>
  <p><b>Margin</b> creates space outside the element‚Äôs border, while <b>padding</b> creates space inside the element, between the border and the content.</p>

  <div class="code-block">
    <pre><code class="language-css live-editor" contenteditable="true" data-target="demo2" data-default="margin:3px; padding:4px;">.box {
  margin: 3px;
  padding: 4px;
}</code></pre>
  </div>
  <div class="box-flex">
    <div class="demo" id="demo2">Box 1</div>
    <div class="demo" style="margin:7px 0px 2px 11px;">Box 2</div>
    <div class="demo" style="margin:7px 3px;">Box 3</div>
  </div>
  <button class="btn reset-btn" data-target="demo2">Reset</button>

  <h2>Setting Borders</h2>
  <p>The border surrounds the padding and content. You can set <code>border-width</code>, <code>border-style</code>, and <code>border-color</code>. Or use the shorthand <code>border</code>.</p>

  <div class="code-block">
    <pre><code class="language-css live-editor" contenteditable="true" data-target="demo3" data-default="border:2px solid red;">.bx {
  border-width: 2px;
  border-style: solid;
  border-color: red;
}</code></pre>
  </div>
  <div class="preview-box">
    <div class="demo" id="demo3">Border Box</div>
    <button class="btn reset-btn" data-target="demo3">Reset</button>
  </div>

  <h2>Border Radius</h2>
  <p>Use <code>border-radius</code> to create rounded corners for elements.</p>

  <div class="code-block">
    <pre><code class="language-css live-editor" contenteditable="true" data-target="demo4" data-default="border-radius:7px;">.div2 {
  border-radius: 7px;
}</code></pre>
  </div>
  <div class="preview-box">
    <div class="demo" id="demo4">Rounded Box</div>
    <button class="btn reset-btn" data-target="demo4">Reset</button>
  </div>

  <h2>Margin Collapse</h2>
  <p>When two vertical margins from adjacent elements meet, they collapse into one. The resulting margin equals the larger of the two. This is called <b>margin collapse</b>.</p>
  <div class="preview-box">
    <div class="demo" style="margin-bottom:20px;">Box A</div>
    <div class="demo" style="margin-top:30px;">Box B</div>
    <p>Notice the gap between Box A and Box B is 30px (not 20 + 30).</p>
  </div>

  <h2>Box Sizing</h2>
  <p>The <code>box-sizing</code> property determines whether padding and border are included in an element‚Äôs width and height.</p>
  <ul>
    <li><b>content-box</b> (default): width/height include only the content.</li>
    <li><b>border-box</b>: width/height include content + padding + border.</li>
  </ul>

  <div class="code-block">
    <pre><code class="language-css live-editor" contenteditable="true" data-target="demo5" data-default="box-sizing:border-box;">.div1 {
  box-sizing: border-box;
}</code></pre>
  </div>
  <div class="preview-box">
    <div class="demo" id="demo5" style="box-sizing:content-box; width:150px;">Content-box</div>
    <div class="demo" style="box-sizing:border-box; width:150px;">Border-box</div>
    <button class="btn reset-btn" data-target="demo5">Reset</button>
  </div>

  <h2>üìù Chapter ‚Äì 3 Practice Set</h2>
  <ol>
    <li>Create a website layout. Add a header box, one content box, and one footer.</li>
    <li>Add borders and margins to the layout.</li>
    <li>Check if the margin collapses between the content box and footer.</li>
    <li>Add the <code>box-sizing</code> property to the content box. Observe the difference.</li>
  </ol>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
  <script>
    function bindEditors() {
      const editors = document.querySelectorAll('.live-editor');
      editors.forEach(editor => {
        const targetId = editor.dataset.target;
        const target = document.getElementById(targetId);
        const defaultStyle = editor.dataset.default;

        function updateStyle() {
          const cssText = editor.innerText;
          const match = cssText.match(/{([^}]*)}/);
          if (match) {
            target.style.cssText = match[1];
          }
        }

        editor.addEventListener('input', updateStyle);
        updateStyle();

        // Reset button
        const resetBtn = document.querySelector(`.reset-btn[data-target='${targetId}']`);
        if (resetBtn) {
          resetBtn.addEventListener('click', () => {
            target.style.cssText = defaultStyle;
            editor.innerText = editor.innerText.replace(/{([^}]*)}/, `{\\n  ${defaultStyle}\\n}`);
            Prism.highlightAll();
          });
        }
      });
    }
    bindEditors();

    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const btn = document.getElementById('themeToggle');
      if (document.body.classList.contains('dark')) {
        btn.innerText = 'üåû Toggle Light Mode';
      } else {
        btn.innerText = 'üåô Toggle Dark Mode';
      }
    });
  </script>
</body>
</html>
